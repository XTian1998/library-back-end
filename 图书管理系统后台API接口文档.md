# 1.图书管理系统后台API接口文档

## 1.1 API接口说明

- 接口基准地址：http://127.0.0.1
- 服务端已开启 CORS 跨域支持
- 需要授权的 API ，必须在请求头中使用 `Authorization` 字段提供 `token` 令牌
- 使用 HTTP Status Code 标识状态
- 数据返回格式统一使用 JSON

### 1.1.1 支持的请求方法

- GET（SELECT）：从服务器取出资源（一项或多项）。
- POST（CREATE）：在服务器新建一个资源。
- PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。
- DELETE（DELETE）：从服务器删除资源。

### 1.1.2 通用返回状态说明

| *状态码* | *含义*                | *说明*                                              |
| -------- | --------------------- | --------------------------------------------------- |
| 200      | OK                    | 请求成功                                            |
| 201      | CREATED               | 创建成功                                            |
| 204      | DELETED               | 删除成功                                            |
| 400      | BAD REQUEST           | 请求的地址不存在或者包含不支持的参数                |
| 401      | UNAUTHORIZED          | 未授权                                              |
| 403      | FORBIDDEN             | 被禁止访问                                          |
| 404      | NOT FOUND             | 请求的资源不存在                                    |
| 422      | Unprocesable entity   | [POST/PUT/PATCH] 当创建一个对象时，发生一个验证错误 |
| 500      | INTERNAL SERVER ERROR | 内部错误                                            |

## 1.2 管理员登录

### 1.2.1 登录

- 请求路径：/admin/adminuser/
- 请求方法：post
- 请求参数

| 参数名   | 参数说明   | 备注      |
| -------- | ---------- | --------- |
| action   | 行为类型   | 值为login |
| id       | 管理员工号 | 不能为空  |
| password | 密码       | 不能为空  |

- 响应数据

```
{
    "data": {
        "id": "10002",
        "username": "xtian2",
        "token": "admin_user9398bbdf36824182992c823680e36977"
    },
    "meta": {
        "status": 200,
        "msg": "登录成功"
    }
}
```

## 1.3 书籍管理

### 1.3.1 添加书籍分类

- 请求路径：/book/category/
- 请求方法：post
- 请求参数

| 参数名   | 参数说明 | 备注     |
| -------- | -------- | -------- |
| category | 书籍种类 | 不能为空 |

- 响应数据

```
{
    "data": {
        "id": 7,
        "category": "健康"
    },
    "meta": {
        "status": 201,
        "msg": "创建成功"
    }
}
```

### 1.3.2 获取书籍分类

- 请求路径：/book/category/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注         |
| ------ | -------- | ------------ |
| query  | 查询类型 | 值为category |

- 响应数据

```
{
    "data": [
        {
            "id": 1,
            "category": "编程"
        },
        {
            "id": 2,
            "category": "美食"
        },
        {
            "id": 3,
            "category": "科技"
        },
        {
            "id": 4,
            "category": "历史"
        },
        {
            "id": 5,
            "category": "教育"
        },
        {
            "id": 6,
            "category": "金融"
        },
        {
            "id": 7,
            "category": "推理"
        }
    ],
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



### 1.3.3 书籍列表数据

- 请求路径：/book/
- 请求方法：get
- 请求参数

| 参数名   | 参数说明     | 备注     |
| -------- | ------------ | -------- |
| query    | 查询参数     | 可以为空 |
| pagenum  | 当前页码     | 不能为空 |
| pagesize | 每页显示条数 | 不能为空 |

- 响应参数

| 参数名    | 参数说明     | 备注 |
| --------- | ------------ | ---- |
| totalpage | 总记录数     |      |
| pagenum   | 当前页码     |      |
| books     | 书籍数据集合 |      |

- 响应数据

```
{
    "data": {
        "totalpage": 2,
        "pagenum": 1,
        "books": [
            {
                "isbn": " 9787115275790",
                "b_name": "JavaScript高级程序设计（第3版）",
                "author": "[美] 尼古拉斯·泽卡斯",
                "press": "人民邮电出版社",
                "price": 99.0,
                "count": 20,
                "category": "编程",
                "image": "/static/uploads/c6599eeeafb74884958cb8c24a3b6d56.jpg",
                "desc": "本书是JavaScript 超级畅销书的最新版。ECMAScript 5 和HTML5 在标准之争中双双胜出，使大量专有实现和客户端扩展正式进入规范，同时也为JavaScript 增添了很多适应未来发展的新特性。本书这一版除增加5 章全新内容外，其他章节也有较大幅度的增补和修订，新内容篇幅约占三分之一。全书从JavaScript 语言实现的各个组成部分——语言核心、DOM、BOM、事件模型讲起，深入浅出地探讨了面向对象编程、Ajax 与Comet 服务器端通信，HTML5 表单、媒体、Canvas（包括WebGL）及Web Workers、地理定位、跨文档传递消息、客户端存储（包括IndexedDB）等新API，还介绍了离线应用和与维护、性能、部署相关的最佳开发实践。本书附录展望了未来的API 和ECMAScript Harmony 规范。",
                "date": "Tue, 28 Jul 2020 09:56:58 -0000",
                "is_delete": false
            }
        ]
    },
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



### 1.3.4 书籍图片上传

- 请求路径：/book/uploads
- 请求方法：post
- 请求参数

| 参数名 | 参数说明 | 备注 |
| ------ | -------- | ---- |
| file   | 上传文件 |      |

- 响应数据

```
{
    "data": {
        "url": "/static/uploads/c6599eeeafb74884958cb8c24a3b6d56.jpg"
    },
    "meta": {
        "status": 200,
        "msg": "上传成功"
    }
}
```



### 1.3.5 添加书籍

- 请求路径：/book/
- 请求方法：post
- 请求参数

| 参数名   | 参数说明         | 备注     |
| -------- | ---------------- | -------- |
| isbn     | 书本ISBN号       | 不能为空 |
| b_name   | 书本名           | 不能为空 |
| author   | 作者名           | 不能为空 |
| press    | 出版社名称       | 不能为空 |
| price    | 价格             | 不能为空 |
| count    | 数量             | 不能为空 |
| category | 书本类型         | 不能为空 |
| image    | 书本封面存放路径 | 不能为空 |
| desc     | 简介             | 不能为空 |

- 响应数据

```
{
    "data": {
        "isbn": "9787115373991",
        "b_name": "Flask Web开发：基于Python的Web应用开发实战",
        "author": "[美] Miguel Grinberg",
        "press": "人民邮电出版社",
        "price": 59.0,
        "count": 20,
        "category": "编程",
        "image": "/static/uploads/c197d4d0169b4061be3904edc5e2157e.jpg",
        "desc": "<div><p>本书不仅适合初级Web开发人员学习阅读，更是Python程序员用来学习高级Web开发技术的优秀参考书。</p><p>• 学习Flask应用的基本结构，编写示例应用；</p><p>• 使用必备的组件，包括模板、数据库、Web表单和电子邮件支持；</p><p>• 使用包和模块构建可伸缩的大型应用；</p><p>• 实现用户认证、角色和个人资料；</p><p>• 在博客网站中重用模板、分页显示列表以及使用富文本；</p><p>• 使用基于Flask的REST式API，在智能手机、平板电脑和其他第三方客户端上实现可用功能；</p><p>• 学习运行单元测试以及提升性能；</p><p>• 将Web应用部署到生产服务器。</p></div>",
        "date": "Tue, 28 Jul 2020 10:29:17 -0000",
        "is_delete": false
    },
    "meta": {
        "status": 201,
        "msg": "添加成功"
    }
}
```

### 1.3.6 根据ISBN查询书籍

- 请求路径：/book/:isbn/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注                  |
| ------ | -------- | --------------------- |
| isbn   | ISBN号   | 不能为空`携带在url中` |

- 响应数据

```
{
    "data": {
        "isbn": "9787115275790",
        "b_name": "JavaScript高级程序设计（第3版）",
        "author": "[美] 尼古拉斯·泽卡斯",
        "press": "人民邮电出版社",
        "price": 99.0,
        "count": 20,
        "category": "编程",
        "image": "/static/uploads/c6599eeeafb74884958cb8c24a3b6d56.jpg",
        "desc": "本书是JavaScript 超级畅销书的最新版。ECMAScript 5 和HTML5 在标准之争中双双胜出，使大量专有实现和客户端扩展正式进入规范，同时也为JavaScript 增添了很多适应未来发展的新特性。本书这一版除增加5 章全新内容外，其他章节也有较大幅度的增补和修订，新内容篇幅约占三分之一。全书从JavaScript 语言实现的各个组成部分——语言核心、DOM、BOM、事件模型讲起，深入浅出地探讨了面向对象编程、Ajax 与Comet 服务器端通信，HTML5 表单、媒体、Canvas（包括WebGL）及Web Workers、地理定位、跨文档传递消息、客户端存储（包括IndexedDB）等新API，还介绍了离线应用和与维护、性能、部署相关的最佳开发实践。本书附录展望了未来的API 和ECMAScript Harmony 规范。",
        "date": "Tue, 28 Jul 2020 09:56:58 -0000",
        "is_delete": false
    },
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



### 1.3.7 编辑书籍

- 请求路径：/book/:isbn/
- 请求方法：put
- 请求参数

| 参数名   | 参数说明         | 备注                  |
| -------- | ---------------- | --------------------- |
| isbn     | 书本ISBN号       | 不能为空`携带在url中` |
| b_name   | 书本名           | 不能为空              |
| author   | 作者名           | 不能为空              |
| press    | 出版社名称       | 不能为空              |
| price    | 价格             | 不能为空              |
| count    | 数量             | 不能为空              |
| category | 书本类型         | 不能为空              |
| image    | 书本封面存放路径 | 不能为空              |
| desc     | 简介             | 不能为空              |

- 响应数据

```
{
    "data": {
        "isbn": "9787115373991",
        "b_name": "Flask Web开发：基于Python的Web应用开发实战",
        "author": "[美] Miguel Grinberg",
        "press": "人民邮电出版社",
        "price": 59.0,
        "count": 20,
        "category": "编程",
        "image": "/static/uploads/c197d4d0169b4061be3904edc5e2157e.jpg",
        "desc": "<div><p>本书不仅适合初级Web开发人员学习阅读，更是Python程序员用来学习高级Web开发技术的优秀参考书。</p><p>• 学习Flask应用的基本结构，编写示例应用；</p><p>• 使用必备的组件，包括模板、数据库、Web表单和电子邮件支持；</p><p>• 使用包和模块构建可伸缩的大型应用；</p><p>• 实现用户认证、角色和个人资料；</p><p>• 在博客网站中重用模板、分页显示列表以及使用富文本；</p><p>• 使用基于Flask的REST式API，在智能手机、平板电脑和其他第三方客户端上实现可用功能；</p><p>• 学习运行单元测试以及提升性能；</p><p>• 将Web应用部署到生产服务器。</p></div>",
        "date": "Tue, 28 Jul 2020 10:29:17 -0000",
        "is_delete": false
    },
    "meta": {
        "status": 200,
        "msg": "更改成功"
    }
}
```



### 1.3.8 删除书籍

- 请求路径：/book/:isbn/
- 请求方法：delete
- 请求参数

| 参数名 | 参数说明 | 备注                  |
| ------ | -------- | --------------------- |
| isbn   | ISBN号   | 不能为空`携带在url中` |

- 响应数据

```
{
    "data": {
        "isbn": "9787115275790"
    },
    "meta": {
        "status": 204,
        "msg": "删除书籍成功"
    }
}
```

### 1.3.9 获取分类图书列表

- 请求路径：/book/category/
- 请求方法：get
- 请求参数

| 参数名   | 参数说明 | 备注       |
| -------- | -------- | ---------- |
| query    | 查询类型 | 值为list   |
| category | 分类名   | 值不能为空 |
| pagenum  | 当前页面 | 值不能为空 |
| pagesize | 页面大小 | 值不能为空 |

- 响应数据

```
{
    "data": {
        "totalpage": 1,
        "pagenum": 1,
        "category": "历史",
        "books": [
            {
                "isbn": "9787508647357",
                "b_name": "人类简史",
                "author": "[以色列] 尤瓦尔·赫拉利",
                "press": "中信出版社",
                "price": 68.0,
                "count": 20,
                "category": "历史",
                "image": "/static/uploads/46429b5157a54a5199dc5bce6f298564.jpg",
                "desc": "十万年前，地球上至少有六种不同的人\n\n但今日，世界舞台为什么只剩下了我们自己？\n\n从只能啃食虎狼吃剩的残骨的猿人，到跃居食物链顶端的智人，\n\n从雪维洞穴壁上的原始人手印，到阿姆斯壮踩上月球的脚印，\n\n从认知革命、农业革命，到科学革命、生物科技革命，\n\n我们如何登上世界舞台成为万物之灵的？\n\n从公元前1776年的《汉摩拉比法典》，到1776年的美国独立宣言，\n\n从帝国主义、资本主义，到自由主义、消费主义，\n\n从兽欲，到物欲，从兽性、人性，到神性，\n\n我们了解自己吗？我们过得更快乐吗？\n\n我们究竟希望自己得到什么、变成什么？",
                "date": "Wed, 29 Jul 2020 10:28:24 -0000",
                "is_delete": false
            }
        ]
    },
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



### 1.3.10 获取热门书籍列表

- 请求路径：/book/popular/
- 请求方法：get
- 响应数据

```
{
    "data": [
        {
            "isbn": "9787100040945",
            "b_name": "如何阅读一本书",
            "author": "[美] 莫提默·J. 艾德勒",
            "press": "商务印书馆",
            "price": 38.0,
            "count": 9,
            "category": "教育",
            "image": "/static/uploads/951a0b0d56f94016933a9b53b6675175.jpg",
            "desc": "    每本书的封面之下都有一套自己的骨架，作为一个分析阅读的读者，责任就是要找出这个骨架。一本书出现在面前时，肌肉包着骨头，衣服包裹着肌肉，可说是盛装而来。读者用不着揭开它的外衣或是撕去它的肌肉来得到在柔软表皮下的那套骨架，但是一定要用一双X光般的透视眼来看这本书，因为那是了解一本书、掌握其骨架的基础。\n    《如何阅读一本书》初版于1940年，1972年大幅增订改写为新版。不懂阅读的人，初探阅读的人，读这本书可以少走冤枉路。对阅读有所体会的人，读这本书可以有更深的印证和领悟。",
            "date": "Mon, 03 Aug 2020 18:54:54 -0000",
            "is_delete": false
        },
        {
            "isbn": "9787508647357",
            "b_name": "人类简史",
            "author": "[以色列] 尤瓦尔·赫拉利",
            "press": "中信出版社",
            "price": 68.0,
            "count": 29,
            "category": "历史",
            "image": "/static/uploads/46429b5157a54a5199dc5bce6f298564.jpg",
            "desc": "    十万年前，地球上至少有六种不同的人但今日，世界舞台为什么只剩下了我们自己？从只能啃食虎狼吃剩的残骨的猿人，到跃居食物链顶端的智人，从雪维洞穴壁上的原始人手印，到阿姆斯壮踩上月球的脚印，从认知革命、农业革命，到科学革命、生物科技革命，我们如何登上世界舞台成为万物之灵的？从公元前1776年的《汉摩拉比法典》，到1776年的美国独立宣言，从帝国主义、资本主义，到自由主义、消费主义，从兽欲，到物欲，从兽性、人性，到神性，我们了解自己吗？我们过得更快乐吗？我们究竟希望自己得到什么、变成什么？",
            "date": "Wed, 29 Jul 2020 10:28:24 -0000",
            "is_delete": false
        },
        {
            "isbn": "9787521701425",
            "b_name": "全球科技通史",
            "author": "[美] 吴军",
            "press": "中信出版集团",
            "price": 88.0,
            "count": 8,
            "category": "科技",
            "image": "/static/uploads/bb576d13fef8445d8f2c9fc1850ad472.jpg",
            "desc": "    大部分人谈到历史的时候，关注的是国家的兴衰、王朝的更替，往往忽视了科技的力量。“文津图书奖”得主吴军博士，首次从科技视角串联历史，以能量和信息两条主线，系统阐述了自智人以来人类文明的演进。\n    全书从远古科技、古代科技、近代科技和现代科技四个部分，详细描述了几万年来农业、工业、天文、地理、生物、数学等各个领域关键性的人物、事件及意义，绘制了一幅科技驱动历史的恢宏画卷。\n    本书既从不同角度对人们熟知的常识进行解读和剖析，又挖掘出许多新的观点，让读者见微知著，感受科技叠加式进步的魅力。\n    通过阅读本书，你将俯瞰一整部人类科技文明史，真正洞察世界变化的趋势，进而消除由于对周围世界缺乏了解、对未来缺乏把控而产生的焦虑",
            "date": "Mon, 03 Aug 2020 18:42:46 -0000",
            "is_delete": false
        },
        {
            "isbn": "9787111128069",
            "b_name": "C程序设计语言",
            "author": "[美]Brian W. Kernighan",
            "press": "机械工业出版社",
            "price": 30.0,
            "count": 19,
            "category": "编程",
            "image": "/static/uploads/ec5175f515d3499bbaf2249afb68b2b2.jpg",
            "desc": "    在计算机发展的历史上，没有哪一种程序设计语言像C语言这样应用广泛。本书原著即为C语言的设计者之一Dennis M.Ritchie和著名计算机科学家Brian W.Kernighan合著的一本介绍C语言的权威经典著作。我们现在见到的大量论述C语言程序设计的教材和专著均以此书为蓝本。原著第1版中介绍的C语言成为后来广泛使用的C语言版本——标准C的基础。人们熟知的“hello,World\"程序就是由本书首次引入的，现在，这一程序已经成为众多程序设计语言入门的第一课。\n    原著第2版根据1987年制定的ANSIC标准做了适当的修订．引入了最新的语言形式，并增加了新的示例，通过简洁的描述、典型的示例，作者全面、系统、准确地讲述了C语言的各个特性以及程序设计的基本方法。对于计算机从业人员来说，《C程序设计语言》是一本必读的程序设计语 言方面的参考书。",
            "date": "Mon, 03 Aug 2020 16:44:21 -0000",
            "is_delete": false
        },
        {
            "isbn": "9787115275790",
            "b_name": "JavaScript高级程序设计（第3版）",
            "author": "[美] 尼古拉斯·泽卡斯",
            "press": "人民邮电出版社",
            "price": 99.0,
            "count": 19,
            "category": "编程",
            "image": "/static/uploads/c6599eeeafb74884958cb8c24a3b6d56.jpg",
            "desc": "    本书是JavaScript 超级畅销书的最新版。ECMAScript 5 和HTML5 在标准之争中双双胜出，使大量专有实现和客户端扩展正式进入规范，同时也为JavaScript 增添了很多适应未来发展的新特性。本书这一版除增加5 章全新内容外，其他章节也有较大幅度的增补和修订，新内容篇幅约占三分之一。全书从JavaScript 语言实现的各个组成部分——语言核心、DOM、BOM、事件模型讲起，深入浅出地探讨了面向对象编程、Ajax 与Comet 服务器端通信，HTML5 表单、媒体、Canvas（包括WebGL）及Web Workers、地理定位、跨文档传递消息、客户端存储（包括IndexedDB）等新API，还介绍了离线应用和与维护、性能、部署相关的最佳开发实践。本书附录展望了未来的API 和ECMAScript Harmony 规范。",
            "date": "Tue, 28 Jul 2020 09:56:58 -0000",
            "is_delete": false
        }
    ],
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```

## 1.4 图书报告

### 1.4.1获取各分类图书数量

- 请求路径：/book/category/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注    |
| ------ | -------- | ------- |
| query  | 查询类型 | 值为num |

- 响应数据

```
{
    "data": [
        {
            "category": "历史",
            "num": 1
        },
        {
            "category": "编程",
            "num": 2
        }
    ],
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



## 1.5 读者登录注册

### 1.5.1 读者注册

- 请求路径：/reader/
- 请求方法：post
- 请求参数

| 参数名   | 参数说明 | 备注         |
| -------- | -------- | ------------ |
| action   | 操作类型 | 值为register |
| id       | 学号     | 值不能为空   |
| username | 用户名   | 值不能为空   |
| password | 密码     | 值不能为空   |
| name     | 姓名     | 值不能为空   |
| phone    | 手机号   | 值不能为空   |

- 响应数据

```
{
    "data": {
        "id": "17002",
        "username": "小天2"
    },
    "meta": {
        "status": 201,
        "msg": "用户创建成功"
    }
}
```

### 1.5.2 读者登录

- 请求路径：/reader/
- 请求方法：post
- 请求参数

| 参数名   | 参数说明 | 备注       |
| -------- | -------- | ---------- |
| action   | 操作类型 | 值为login  |
| id       | 学号     | 值不能为空 |
| password | 密码     | 值不能为空 |

- 响应数据

```
{
    "data": {
        "id": "17001",
        "username": "小天",
        "status": false,
        "token": "reader_user626b92a8a1614c8fab8170f1f815b20d"
    },
    "meta": {
        "status": 200,
        "msg": "登录成功"
    }
}
```



## 1.6 读者预约

### 1.6.1 预约书籍

- 请求路径：/book/bookinfo/
- 请求方法：post
- 请求参数

| 参数名 | 参数说明 | 备注       |
| ------ | -------- | ---------- |
| rid    | 学号     | 值不能为空 |
| isbn   | ISBN号   | 值不能为空 |

- 响应数据

```
{
    "data": {
        "oid": "170029787508647357",
        "rid": "17002",
        "isbn": "9787508647357",
        "book_date": "Thu, 30 Jul 2020 00:00:00 -0000"
    },
    "meta": {
        "status": 201,
        "msg": "预约成功"
    }
}
```

### 1.6.2 取消预约

- 请求路径：/book/bookinfo/
- 请求方法：delete
- 请求参数

| 参数名 | 参数说明 | 备注       |
| ------ | -------- | ---------- |
| rid    | 学号     | 值不能为空 |
| isbn   | ISBN号   | 值不能为空 |

- 响应数据

```
{
    "data": null,
    "meta": {
        "status": 204,
        "msg": "取消预约成功"
    }
}
```



## 1.7 管理员管理订单

### 1.7.1 获取预约列表

- 请求路径：/book/bookinfo/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注       |
| ------ | -------- | ---------- |
| rid    | 学号     | 值不能为空 |

- 响应数据

```
{
    "data": {
        "rid": "17003",
        "name": "test1",
        "phone": "18988889999",
        "book_list": [
            {
                "oid": "170039787111213826",
                "rid": "17003",
                "isbn": "9787111213826",
                "book_date": "Fri, 07 Aug 2020 00:00:00 -0000",
                "b_name": "Java编程思想 （第4版）"
            }
        ]
    },
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



### 1.7.2  借出书籍

- 请求路径：/book/leadinfo/
- 请求方法：post
- 请求参数

| 参数名 | 参数说明 | 备注       |
| ------ | -------- | ---------- |
| rid    | 学号     | 值不能为空 |
| isbn   | ISBN号   | 值不能为空 |

- 响应数据

```
{
    "data": {
        "oid": "17001978750864735720200730",
        "rid": "17001",
        "isbn": "9787508647357",
        "lend_date": "Thu, 30 Jul 2020 00:00:00 -0000",
        "back_date": null,
        "status": 0
    },
    "meta": {
        "status": 201,
        "msg": "借阅书籍成功"
    }
}
```



### 1.7.3 归还书籍

- 请求路径：/book/leadinfo/
- 请求方法：put
- 请求参数

| 参数名 | 参数说明 | 备注       |
| ------ | -------- | ---------- |
| rid    | 学号     | 值不能为空 |
| isbn   | ISBN号   | 值不能为空 |

- 响应数据

```
{
    "data": {
        "oid": "17001978750864735720200730",
        "rid": "17001",
        "isbn": "9787508647357",
        "lend_date": "Thu, 30 Jul 2020 00:00:00 -0000",
        "back_date": "Thu, 30 Jul 2020 00:00:00 -0000",
        "status": 1
    },
    "meta": {
        "status": 200,
        "msg": "归还书籍成功"
    }
}
```



### 1.7.4 查询借阅记录列表

- 请求路径：/book/leadinfo/
- 请求方法：get
- 请求参数

| 参数名   | 参数说明 | 备注       |
| -------- | -------- | ---------- |
| pagenum  | 当前页数 | 值不能为空 |
| pagesize | 页面大小 | 值不能为空 |

- 响应数据

```
{
    "data": {
        "total": 5,
        "pagenum": 1,
        "pagesize": 2,
        "list": [
            {
                "oid": "17001978711527579020200808",
                "rid": "17001",
                "isbn": "9787115275790",
                "lend_date": "Sat, 08 Aug 2020 00:00:00 -0000",
                "back_date": null,
                "status": 0,
                "b_name": "JavaScript高级程序设计（第3版）"
            },
            {
                "oid": "17001978750864735720200804",
                "rid": "17001",
                "isbn": "9787508647357",
                "lend_date": "Tue, 04 Aug 2020 00:00:00 -0000",
                "back_date": null,
                "status": 0,
                "b_name": "人类简史"
            }
        ]
    },
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



### 1.7.5 查询读者个人归还记录

- 请求路径：/book/leadinfo/:id/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注                  |
| ------ | -------- | --------------------- |
| id     | 学号     | 不能为空`携带在url中` |
| type   | 操作类型 | 值为history           |

- 响应数据

```
{
    "data": {
        "rid": "17001",
        "name": "曹天",
        "phone": "18988889999",
        "lead_history": [
            {
                "oid": "17001978711112806920200804",
                "rid": "17001",
                "isbn": "9787111128069",
                "b_name": "C程序设计语言",
                "lend_date": "Tue, 04 Aug 2020 00:00:00 -0000",
                "back_date": "Sat, 08 Aug 2020 00:00:00 -0000",
                "status": 1
            },
            {
                "oid": "17001978720809532820200808",
                "rid": "17001",
                "isbn": "9787208095328",
                "b_name": "穷查理宝典",
                "lend_date": "Sat, 08 Aug 2020 00:00:00 -0000",
                "back_date": "Sat, 08 Aug 2020 00:00:00 -0000",
                "status": 1
            },
            {
                "oid": "17001978750636543720200804",
                "rid": "17001",
                "isbn": "9787506365437",
                "b_name": "活着",
                "lend_date": "Tue, 04 Aug 2020 00:00:00 -0000",
                "back_date": "Tue, 04 Aug 2020 00:00:00 -0000",
                "status": 1
            },
            {
                "oid": "17001978750864735720200729",
                "rid": "17001",
                "isbn": "9787508647357",
                "b_name": "人类简史",
                "lend_date": "Wed, 29 Jul 2020 00:00:00 -0000",
                "back_date": "Thu, 30 Jul 2020 00:00:00 -0000",
                "status": 1
            }
        ]
    },
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



### 1.7.6 查询读者个人借阅记录

- 请求路径：/book/leadinfo/:id/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注                  |
| ------ | -------- | --------------------- |
| id     | 学号     | 不能为空`携带在url中` |
| type   | 操作类型 | 值为leading           |

- 响应数据

```
{
    "data": [
        {
            "oid": "17001978711527579020200808",
            "rid": "17001",
            "isbn": "9787115275790",
            "b_name": "JavaScript高级程序设计（第3版）",
            "lend_date": "Sat, 08 Aug 2020 00:00:00 -0000",
            "back_date": null,
            "status": 0
        },
        {
            "oid": "17001978750864735720200804",
            "rid": "17001",
            "isbn": "9787508647357",
            "b_name": "人类简史",
            "lend_date": "Tue, 04 Aug 2020 00:00:00 -0000",
            "back_date": null,
            "status": 0
        }
    ],
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```

## 1.8 管理员管理读者状态

### 1.8.1 更新违规读者列表

- 请求路径：/admin/blacklist/
- 请求方法：put

- 响应数据

```
{
    "data": null,
    "meta": {
        "status": 200,
        "msg": "更新成功"
    }
}
```

## 

### 1.8.2 获取违规读者列表

- 请求路径：/admin/blacklist/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注     |
| ------ | -------- | -------- |
| query  | 查询参数 | 不能为空 |

- 响应数据

```
{
    "data": [
        {
            "id": "17002",
            "username": "小天2",
            "status": true,
            "overtime_lead_info": [
                {
                    "oid": "17002978750864735720190728",
                    "isbn": "9787508647357",
                    "lend_date": "Sun, 28 Jul 2019 00:00:00 -0000",
                    "status": 2
                }
            ]
        }
    ],
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```

### 1.8.3 恢复违规读者账号

- 请求路径：/admin/blackuser/:id/
- 请求方法：put
- 请求参数

| 参数名 | 参数说明 | 备注                  |
| ------ | -------- | --------------------- |
| id     | 学号     | 不能为空`携带在url中` |

- 响应数据

```
{
    "data": {
        "id": "17002",
        "username": "小天2",
        "status": false
    },
    "meta": {
        "status": 200,
        "msg": "账号恢复成功"
    }
}
```



## 1.9 图书评论

### 1.9.1 添加书籍评论

- 请求路径：/book/bookcomment/
- 请求方法：post
- 请求参数

| 参数名  | 参数说明 | 备注         |
| ------- | -------- | ------------ |
| rid     | 学号     | 值不可以为空 |
| isbn    | ISBN号   | 值不可以为空 |
| content | 内容     | 值不可以为空 |

- 响应数据

```
{
    "data": {
        "id": 4,
        "rid": "17001",
        "isbn": "9787508647357",
        "date": "Fri, 31 Jul 2020 17:41:29 -0000",
        "content": "好书好书！"
    },
    "meta": {
        "status": 201,
        "msg": "评论成功"
    }
}
```



### 1.9.2  获取书籍评论

- 请求路径：/book/bookcomment/
- 请求方法：get
- 请求参数

| 参数名 | 参数说明 | 备注         |
| ------ | -------- | ------------ |
| isbn   | ISBN号   | 值不可以为空 |

- 响应数据

```
{
    "data": [
        {
            "id": 4,
            "rid": "17001",
            "isbn": "9787508647357",
            "date": "Fri, 31 Jul 2020 17:41:29 -0000",
            "content": "好书好书！"
        },
        {
            "id": 5,
            "rid": "17001",
            "isbn": "9787508647357",
            "date": "Fri, 31 Jul 2020 17:51:08 -0000",
            "content": "test"
        }
    ],
    "meta": {
        "status": 200,
        "msg": "获取成功"
    }
}
```



